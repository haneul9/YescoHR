sap.ui.define(["sap/m/library","sap/ui/model/json/JSONModel","../model/formatter","./BaseController"],(e,t,o,s)=>{"use strict";const n=e.URLHelper;return s.extend("sap.ui.yesco.controller.Detail",{formatter:o,onInit(){const e=new t({busy:false,delay:0});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,this);this.setModel(e,"detailView");this.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this))},onSendEmailPress(){const e=this.getModel("detailView");n.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.getProperty("/shareSendEmailMessage"))},_onObjectMatched(e){const t=e.getParameter("arguments").objectId;this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(()=>{var e=this.getModel().createKey("Products",{ProductID:t});this._bindView("/"+e)})},_bindView(e){const t=this.getModel("detailView");t.setProperty("/busy",false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested(){t.setProperty("/busy",true)},dataReceived(){t.setProperty("/busy",false)}}})},_onBindingChange(){const e=this.getView();const t=e.getElementBinding();if(!t.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearMasterListSelection();return}const o=t.getPath();const s=this.getResourceBundle();const n=e.getModel().getObject(o);const r=n.ProductID;const a=n.ProductName;const i=this.getModel("detailView");this.getOwnerComponent().oListSelector.selectAListItem(o);i.setProperty("/shareSendEmailSubject",s.getText("shareSendEmailObjectSubject",[r]));i.setProperty("/shareSendEmailMessage",s.getText("shareSendEmailObjectMessage",[a,r,location.href]))},_onMetadataLoaded(){const e=this.getView().getBusyIndicatorDelay();const t=this.getModel("detailView");t.setProperty("/delay",0);t.setProperty("/busy",true);t.setProperty("/delay",e)},onCloseDetailPress(){this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",false);this.getOwnerComponent().oListSelector.clearMasterListSelection();this.getRouter().navTo("master")},toggleFullScreen(){const e=this.getModel("appView");const t=e.getProperty("/actionButtonsInfo/midColumn/fullScreen");e.setProperty("/actionButtonsInfo/midColumn/fullScreen",!t);if(!t){e.setProperty("/previousLayout",e.getProperty("/layout"));e.setProperty("/layout","MidColumnFullScreen")}else{e.setProperty("/layout",e.getProperty("/previousLayout"))}}})});