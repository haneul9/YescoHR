sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/Log","sap/base/util/UriParameters"],(e,t,r,a)=>{"use strict";let o;const s="sap/ui/yesco/";const i=s+"localService/mockdata";const n={init(n={}){return new Promise((c,u)=>{const p=sap.ui.require.toUrl(s+"manifest.json");const l=new t(p);l.attachRequestCompleted(()=>{const t=new a(window.location.href);const u=sap.ui.require.toUrl(i);const p=l.getProperty("/sap.app/dataSources/mainService");const d=sap.ui.require.toUrl(s+p.settings.localUri);let f=/.*\/$/.test(p.uri)?p.uri:p.uri+"/";f=f&&new URI(f).absoluteTo(sap.ui.require.toUrl(s)).toString();if(!o){o=new e({rootUri:f})}else{o.stop()}e.config({autoRespond:true,autoRespondAfter:n.delay||t.get("serverDelay")||500});o.simulate(d,{sMockdataBaseUrl:u,bGenerateMissingMockData:true});const m=o.getRequests();const g=(e,t,r)=>{r.response=r=>{r.respond(e,{"Content-Type":"text/plain;charset=utf-8"},t)}};if(n.metadataError||t.get("metadataError")){m.forEach(e=>{if(e.path.toString().indexOf("$metadata")>-1){g(500,"metadata Error",e)}})}const h=n.errorType||t.get("errorType");const q=h==="badRequest"?400:500;if(h){m.forEach(e=>{g(q,h,e)})}o.setRequests(m);o.start();r.info("Running the app with mock data");c()});l.attachRequestFailed(function(){var e="Failed to load application manifest";r.error(e);u(new Error(e))})})},getMockServer(){return o}};return n});