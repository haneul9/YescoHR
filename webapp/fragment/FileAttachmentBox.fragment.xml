<core:FragmentDefinition xmlns="sap.m"
  xmlns:table="sap.ui.table"
  xmlns:core="sap.ui.core"
  xmlns:u="sap.ui.unified"
  xmlns:custom="sap.ui.yesco.control">
  <VBox id="fileAttachmentBox" class="vCardBox" visible="{= !!${/settings/visible} }" busy="true" busyIndicatorDelay="0">
    <customData>
      <core:CustomData key="full-files" value="{= ${/settings/fullFiles} ? 'tru' : 'fals' }e" writeToDom="true" />
      <core:CustomData key="editable" value="{= ${/settings/editable} ? 'tru' : 'fals' }e" writeToDom="true" />
    </customData>
    <HBox class="table-toolbar">
      <HBox class="title">
        <custom:Title text="{/settings/title}">
          <custom:layoutData>
            <FlexItemData styleClass="header-title" />
          </custom:layoutData>
        </custom:Title>
        <Link text="{/settings/description}" visible="{= ${/settings/editable} &amp;&amp; !!${/settings/description} }" enabled="{/settings/enableDescriptionPopover}" press=".onPressAttachmentDescription" subtle="true" class="desc-txt ml-0">
          <layoutData>
            <FlexItemData styleClass="header-description" />
          </layoutData>
        </Link>
      </HBox>
      <HBox class="table-actions" visible="{/settings/editable}" justifyContent="End">
        <u:FileUploader id="fileUploader" visible="{= !${/settings/fullFiles} }" maximumFileSize="{/settings/maxFileSize}" fileType="{/settings/fileTypes}" change=".onChangeAttachment" uploadComplete= ".onUploadCompleteAttachment" typeMissmatch=".onTypeMissMatchAttachment" icon="sap-icon://add" buttonText="{i18n>LABEL_00107}" buttonOnly="true">
          <u:layoutData>
            <FlexItemData styleClass="attachfile-button" />
          </u:layoutData>
        </u:FileUploader>
        <Button icon="sap-icon://less" text="{i18n>LABEL_00110}" press=".onPressAttachmentRemove">
          <layoutData>
            <FlexItemData styleClass="removefile-button" />
          </layoutData>
        </Button>
        <Button icon="sap-icon://reset" text="{i18n>LABEL_00176}" press=".onPressAttachmentRemoveCancel">
          <layoutData>
            <FlexItemData styleClass="restorefile-button" />
          </layoutData>
        </Button>
      </HBox>
    </HBox>
    <table:Table id="filesTable" width="100%" selectionMode="{/fileSelectionMode}" columnHeaderHeight="45" rowHeight="{/settings/rowHeight}" visibleRowCount="{/fileCount}" rows="{/files}" noData="{i18n>MSG_00001}">
      <table:columns>
        <table:Column width="4%">
          <Label text="No"/>
          <table:template>
            <Text text="{Seqnr}" width="100%" textAlign="Center" />
          </table:template>
        </table:Column>
        <table:Column width="8%" visible="{/settings/gubun}">
          <Label text="{i18n>LABEL_00143}"/>
          <table:template>
            <Select selectedKey="{Gubun}" editable="{/settings/gubun}">
              <!-- <core:Item key="00" text="선택" />
                   <core:Item key="10" text="5대암" />
                   <core:Item key="20" text="난임" /> -->
            </Select>
          </table:template>
        </table:Column>
        <table:Column>
          <Label text="{i18n>LABEL_00248}" width="100%" />
          <table:template>
            <HBox width="100%">
              <Link text="{Zfilename}" href="{Fileuri}" target="_blank" width="100%" textAlign="Begin" subtle="{New}">
                <customData>
                  <core:CustomData key="deteled-attachment" value="{= !${New} &amp;&amp; ${Deleted} ? 'O' : 'X' }" writeToDom="true" />
                  <core:CustomData key="new-attachment" value="{= ${New} ? 'O' : 'X' }" writeToDom="true" />
                </customData>
              </Link>
            </HBox>
          </table:template>
        </table:Column>
      </table:columns>
    </table:Table>
  </VBox>
</core:FragmentDefinition>